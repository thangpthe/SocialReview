@model SocialReview.ViewModels.ProductDetailViewModel
@{
    ViewData["Title"] = Model.Product.ProductName;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết Sản phẩm - Trustify</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --purple-700: #6A1B9A;
            --purple-600: #8E24AA;
            --purple-100: #E1BEE7;
            --purple-50: #F3E5F5;
            --bg-light: #F9F6FB;
            --text-dark: #212121;
            --text-gray: #555;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        h1, h2, h3, h4, h5, h6, .font-poppins {
            font-family: 'Poppins', sans-serif;
        }

        .container {
            width: min(1200px, 95%);
            margin-left: auto;
            margin-right: auto;
        }

        .btn-primary {
            background-color: var(--purple-700);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: background-color 0.2s ease;
        }

            .btn-primary:hover {
                background-color: var(--purple-600);
            }

        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600;
            margin-bottom: 1.5rem; /* mb-6 */
            color: var(--purple-700);
            border-bottom: 2px solid var(--purple-100);
            padding-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--purple-600);
            text-decoration: none;
        }

            .breadcrumb a:hover {
                text-decoration: underline;
            }

        .breadcrumb span {
            color: var(--text-gray);
        }
    </style>
</head>
<body>
    <main class="container py-10 md:py-16 space-y-12">

       

        <!-- ===== SECTION: THÔNG TIN SẢN PHẨM ===== -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
            <!-- Ảnh sản phẩm -->
            <div class="card aspect-video lg:aspect-square">
                <img src="@Model.Product.ProductImage" alt="@Model.Product.ProductName" class="w-full h-full object-cover">
                
            </div>

            <!-- Chi tiết sản phẩm -->
            <div class="space-y-4">
                <span class="inline-block bg-[--purple-50] text-[--purple-700] text-xs font-semibold px-2.5 py-0.5 rounded-full">@Model.Product.ProductType</span>
                <h1 class="font-poppins text-3xl md:text-4xl font-bold">@Model.Product.ProductName</h1>
                <div class="flex items-center gap-2">
                    @if (Model.TotalReviews > 0)
                    {
                        <span class="text-yellow-500 flex items-center">
                            @for (int i = 1; i <= 5; i++)
                            {
                                <i class="fa-solid fa-star @(i <= Model.AverageRating ? "" : "fa-regular")"></i>
                            }
                        </span>
                        <span class="text-sm text-[--text-gray]">(@Model.AverageRating.ToString("F1")) / @Model.TotalReviews.ToString("N0") đánh giá</span>
                    }
                    else
                    {
                        <span class="text-sm text-[--text-gray]">Chưa có đánh giá</span>
                    }
                </div>
                <!-- Giá (nếu có)
                <p class="text-2xl font-semibold text-[--purple-700]">Liên hệ</p>
                -->
                <div class="text-[--text-gray] leading-relaxed space-y-3 pt-2">
                    <p>@Model.Product.ProductDescription</p>
                    @* <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Giải pháp Chatbot tự động hóa CSKH.</li>
                        <li>Công nghệ OCR nhận dạng ký tự chính xác.</li>
                        <li>Nền tảng eKYC định danh khách hàng điện tử.</li>
                    </ul> *@
                </div>

               

                @* <div class="pt-6">
                    <a href="#write-review" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa-solid fa-pencil"></i> Viết Review
                    </a>
                    <!-- Có thể thêm nút "Lưu lại" -->
                </div> *@
            </div>
        </section>

        <!-- ===== SECTION: ĐÁNH GIÁ CHI TIẾT ===== -->
        <section id="reviews">
            <h2 class="section-title">Đánh giá về @Model.Product.ProductName</h2>
            <!-- Vùng hiển thị các review cards -->
            <div class="space-y-6">
                @if (Model.Reviews != null && Model.Reviews.Any())
                {
                    @foreach (var review in Model.Reviews)
                    {
                        <div class="card p-5 flex gap-4 items-start">
                            @if (review.User != null && !string.IsNullOrEmpty(review.User.UserAvatar))
                            {
                                <img src="@review.User.UserAvatar"
                                     class="w-10 h-10 rounded-full flex-shrink-0 object-cover"
                                     alt="Avatar của @review.User.FullName">
                            }
                            else
                            {
                                <div class="w-10 h-10 rounded-full flex-shrink-0 bg-purple-100 flex items-center justify-center"
                                     title="@(review.User?.FullName ?? "Người dùng ẩn danh")">
                                    <i class="fa-solid fa-user text-purple-600"></i>
                                </div>
                            }
                            <div class="flex-grow">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="font-semibold text-sm">@(review.User?.FullName ?? "Người dùng ẩn danh")</span>
                                    <span class="text-xs text-gray-400">@review.CreatedAt.ToString("dd/MM/yyyy")</span>
                                </div>
                                @* <h4 class="font-semibold mb-1 text-base">@review.Title</h4> *@
                                <p class="text-sm text-[--text-gray] leading-relaxed">@review.Content</p>
                                <div class="flex items-center gap-1 text-yellow-500 mb-2">
                                    @* Dùng vòng lặp for để hiển thị sao động *@
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        <i class="@(i <= review.Rating ? "fa-solid fa-star" : "fa-regular fa-star")"></i>
                                    }

                                </div>

                                @* TODO: Thêm logic cho nút Hữu ích / Bình luận *@
                                <div class="mt-3 flex items-center gap-4 text-xs text-gray-500">
                                    <button class="hover:text-[--purple-600]"><i class="fa-regular fa-thumbs-up mr-1"></i> Hữu ích (0)</button>
                                    <button class="hover:text-[--purple-600]"><i class="fa-regular fa-comment mr-1"></i> Bình luận (0)</button>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="card p-5 text-center">
                        <p class="text-[--text-gray]">Chưa có đánh giá nào cho sản phẩm này. Hãy là người đầu tiên!</p>
                    </div>
                }

                <!-- Thêm review khác -->
            </div>
            <!-- Nút xem thêm / Phân trang -->
            <div class="text-center mt-8">
                <a href="#" class="text-[--purple-600] hover:underline font-medium">Xem tất cả đánh giá</a>
            </div>
        </section>

        <!-- ===== SECTION: VIẾT REVIEW (Form) ===== -->
        <section id="write-review">
            <h2 class="section-title">Chia sẻ đánh giá của bạn</h2>
            <div class="card p-6 md:p-8">
                <form class="space-y-4">
                    <div class="form-group">
                        <label for="review-title" class="block text-sm font-medium mb-1">Tiêu đề đánh giá *</label>
                        <input type="text" id="review-title" name="Title" required class="w-full border border-[--border-color] rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-[--purple-600]" placeholder="Ví dụ: Dịch vụ tuyệt vời!">
                    </div>
                    <div class="form-group">
                        <label for="review-rating" class="block text-sm font-medium mb-1">Đánh giá của bạn *</label>
                        <select id="review-rating" name="Rating" required class="w-full border border-[--border-color] rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-[--purple-600]">
                            <option value="">Chọn số sao</option>
                            <option value="5">5 sao - Rất hài lòng</option>
                            <option value="4">4 sao - Hài lòng</option>
                            <option value="3">3 sao - Bình thường</option>
                            <option value="2">2 sao - Không hài lòng</option>
                            <option value="1">1 sao - Rất tệ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="review-content" class="block text-sm font-medium mb-1">Nội dung đánh giá *</label>
                        <textarea id="review-content" name="Content" rows="5" required class="w-full border border-[--border-color] rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-[--purple-600]" placeholder="Chia sẻ chi tiết trải nghiệm của bạn..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="review-image" class="block text-sm font-medium mb-1">Ảnh đính kèm (Tùy chọn)</label>
                        <input type="file" id="review-image" name="Image" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[--purple-50] file:text-[--purple-700] hover:file:bg-[--purple-100]">
                    </div>
                    <div class="text-right">
                        <button type="submit" class="btn-primary">Gửi đánh giá</button>
                    </div>
                </form>
            </div>
        </section>

    </main>

    

</body>
</html>
